<ion-view view-title="Open Bets" class="ion-page">
  <div class="header-container">
    <ion-navbar class="toolbar toolbar-md app-header root-page">
      <div class="toolbar-background toolbar-background-md"></div>
      <button class="search-back disable-hover font25 bar-button bar-button-md bar-button-default bar-button-default-md">
        <a class="ion-arrow-left-c color-white"></a>
      </button>
      <ion-buttons end="" class="bar-buttons bar-buttons-md">
        <!--
          <button class="old-search search disable-hover bar-button bar-button-md bar-button-default bar-button-default-md"
            ion-button="">
            <i class="icon ion-search placeholder-icon"></i>
            <div class="button-effect"></div>
          </button>
        -->
        <search-event></search-event>
        <button analytics-on="" class="balance-button disable-hover bar-buttons bar-buttons-md bar-button bar-button-md bar-button-default bar-button-default-md bar-button-menutoggle bar-button-menutoggle-md"
          ion-button="" menu-toggle="right">
          <span class="button-inner">
            <balance ng-balance="balanceData"> </balance>
          </span>
          <div class="button-effect"></div>
        </button>
      </ion-buttons>
      <div class="toolbar-content toolbar-content-md" ui-sref="app.home">
        <ion-title class="left-title title title-md">
          <div class="toolbar-title toolbar-title-md">
            <div class="logo">Kings Bet</div>
          </div>
        </ion-title>
      </div>
    </ion-navbar>
  </div>
  <ion-content class="my-bets-page content content-md" padding="" style="margin-top:60px;">
    <h2 class="page-title">Open Bets</h2>
    <div class="my-bets-container">
      <ion-list>
        <div class="mb-10">
          <ion-item class="item-stable" ng-click="toggleGroup('unmatched')" ng-class="{active: isGroupShown('unmatched')}">
            <h3 class="toggle">
              <span>Unmatched Bets</span> &nbsp;
              <div class="item-icon-right">
                <i class="icon font15 ion-chevron-up" ng-class="isGroupShown('unmatched') ? 'ion-chevron-up' : 'ion-chevron-down'"
                  style=""></i>
              </div>
            </h3>
          </ion-item>
          <ion-item class="item-accordion" ng-show="isGroupShown('unmatched')">
            <span ng-if="!myCurrentBetData.unMatchedbets || myCurrentBetData.unMatchedbets.length == 0">You have no
              unmatched bets</span>
            <section class="content-wrapper">
              <div>
                <open-bets-listing type="matched">
                  <div class="open-bets-listing event">
                    <div class="market">
                      <div class="selection">
                        <ul ng-repeat="unMatchedbet in myCurrentBetData.unMatchedbets">
                          <li ng-repeat="bet in unMatchedbet.betData" ng-class="{'back':bet.type =='BACK','lay':bet.type =='LAY'}">
                            <div class="bet-info no-link">
                              {{bet.type}} {{bet.horse}} for {{bet.stake | number : 2}} @ {{bet.betRate| number : 2}}
                              {{bet.type =='BACK' ? 'to win' : 'liability'}} {{((bet.betRate-1)*bet.stake) | number :
                              2}}.
                            </div>
                            <div class="wrapper">
                              <div class="bet-details">
                                <div><strong>{{matchedBet.betData[0].market}}</strong></div>
                                <div>
                                  <strong>Placed</strong> : {{bet.placedDate | date:'dd/MM/yyyy hh:mm:ss'}}
                                </div>
                              </div>
                              <div class="input-buttons">
                                <button class="disable-hover button button-md button-default button-default-md
                                  button-md-cta-secondary"
                                  ng-click="cancelBet(bet,'')">
                                  <span class="button-inner">Cancel</span>
                                  <div class="button-effect"></div>
                                </button>
                                <button class="disable-hover button button-md button-default button-default-md button-md-cta-primary"
                                  ui-sref="app.match-inner({game: bet.eventType ,parentId: bet.parentCategory,unmatched:bet.betId,eventId:bet.eventId})">
                                  <span class="button-inner">Update</span>
                                  <div class="button-effect"></div>
                                </button>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </open-bets-listing>
              </div>
            </section>
          </ion-item>
        </div>
        <div class="mb-10">
          <ion-item class="item-stable" ng-click="toggleGroup('matched')" ng-class="{active: isGroupShown('matched')}">
            <h3 class="toggle">
              <span>Matched Bets</span> &nbsp;
              <div class="item-icon-right">
                <i class="icon font15 ion-chevron-up" ng-class="isGroupShown('matched') ? 'ion-chevron-up' : 'ion-chevron-down'"></i>
              </div>
            </h3>
          </ion-item>
          <ion-item class="item-accordion" ng-show="isGroupShown('matched')">
            <span ng-if="!myCurrentBetData.matchedBets || myCurrentBetData.matchedBets.length == 0">You have no
              matched bets</span>
            <section class="content-wrapper">
              <div>
                <open-bets-listing type="matched">
                  <div class="open-bets-listing event">
                    <div class="market">
                      <div class="selection">
                        <ul ng-repeat="matchedBet in myCurrentBetData.matchedBets">
                          <li ng-repeat="bet in matchedBet.betData" ng-class="{'back':bet.type =='BACK','lay':bet.type =='LAY'}">
                            <div class="bet-info matched">
                              {{bet.type}} {{bet.horse}} for {{bet.stake | number : 2}} @ {{bet.betRate| number : 2}}
                              {{bet.type =='BACK' ? 'to win' : 'liability'}} {{((bet.betRate-1)*bet.stake) | number :
                              2}}.
                            </div>
                            <div class="wrapper">
                              <div class="bet-details">
                                <div><strong>{{matchedBet.betData[0].event}}</strong></div>
                                <div><strong>{{matchedBet.betData[0].market}}</strong></div>
                                <div>
                                  <strong>Placed</strong> : {{bet.placedDate | date:'dd/MM/yyyy hh:mm:ss'}}
                                </div>
                              </div>
                            </div>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </open-bets-listing>
              </div>
            </section>
          </ion-item>
        </div>
      </ion-list>
    </div>
  </ion-content>
</ion-view>
